## 10. Bootstrap ##
Many websites thee days are built with CSS grid frameworks such as Bootstrap. Such frameworks make it easy to create grid-based layouts using DIV tags and certain CSS classes to define rows and columns. The Layouts module comes with a light-weight grid stylesheet out of the box, but when your Orchard theme is based on Bootstrap, you will definitely want to take advantage of those CSS classes. In this section we'll learn what shape templates to override and how to customize those templates to make them work. Although I'm using Bootstrap as an example, the principles shown apply to any other CSS grid frameworks (such as Foundation). The main differences will be the CSS class names used by each framework.

#### Analyzing which templates to override ####
In order to understand what needs to be overridden, we need to analyze the HTML output as generated by the Grid, Row and Column elements, since we use those to created grids. For example, take the following layout:

![](./figures/fig-74-grid-design.png)

When rendered on the front-end using the default shape templates, the following HTML output is generated for this grid:

```
<div class="table">
   <div class="row">
      <div class=" span-12 cell"></div>
   </div>
   <div class="row">
      <div class=" span-6 cell"></div>
      <div class=" span-6 cell"></div></div>
   <div class="row">
      <div class="offset-3 span-3 cell"></div>
      <div class=" span-3 cell"></div>
   </div>
</div>
```

When we want the same grid structure using Bootstrap CSS, we would need something like the following HTML output:

```
<div class="container-fluid">
   <div class="row">
      <div class="col-xs-12"></div>
   </div>
   <div class="row">
      <div class="col-xs-6"></div>
      <div class="col-xs-6"></div></div>
   <div class="row">
      <div class="col-xs-offset-3 col-md-3"></div>
      <div class="col-xs-3"></div>
   </div>
</div>
```

Notice how the HTML structure itself can remain exactly the same. The only changes needed are the CSS classes being applied.

To change the CSS classes being used, we need to override the following shape templates from the `Orchard.Layouts` module:

- **Elements/Grid.cshtml** (Responsible for generating the `<div class="table">` tag)
- **Elements/Column.cshtml** (Responsible for generating the `<div class="span-{n} offset-{o} cell">` tag)
- **Parts.Layout.cshtml** (Responsible for including the default CSS grid stylesheet. See below section)

Since the **Row.cshtml** shape template renders the *row* CSS class already, there's no need to override that one.

However, we do need to override another shape template: **Parts.Layout.cshtml**. This is the root shape that renders the layout as well as includes the default CSS grid stylesheet. Since we're relying on Bootstrap CSS on the front-end, we need to override that template to prevent the default grid stylesheet from being included.

#### Overriding default templates ####
To achieve the desired HTML output, copy over the listed shape templates from the **Orchard.Layouts/Views** folder to the **Views** folder of your current theme. and update each template as follows:

*Views/Elements/Grid.cshtml*
```
@using Orchard.Layouts.Helpers
@{
    var tagBuilder = TagBuilderExtensions.CreateElementTagBuilder(Model);
    tagBuilder.AddCssClass("container"); // <-- Notice the use of the "container" class.
}
@tagBuilder.StartElement
@DisplayChildren(Model)
@tagBuilder.EndElement
```

*Views/Elements/Column.cshtml*
```
@using Orchard.Core.Shapes
@using Orchard.DisplayManagement.Shapes
@using Orchard.Layouts.Helpers
@{
    var columnSpan = (int?)Model.Width;
    var columnOffset = (int?)Model.Offset;
    var columnOffsetCss = columnOffset > 0 ? "col-xs-offset-" + columnOffset : default(string); // <-- Notice the use of the "col-xs-offset-{n}" class.
    var tagBuilder = TagBuilderExtensions.AddCommonElementAttributes(new OrchardTagBuilder("div"), Model);

    tagBuilder.AddCssClass(String.Concat("col-xs-", columnSpan)); // <-- Notice the use of the "col-xs-{n}" class.
    tagBuilder.AddCssClass(columnOffsetCss);
}
@if (!Model.Collapsed) {
    @tagBuilder.StartElement
    foreach (var item in CoreShapes.Order(Model)) {
        @Display(item)
    }
    @tagBuilder.EndElement
}
```

*Views/Parts.Layout.cshtml*
```
<!-- The only change here is the removal of the following line: -->
@*Style.Include("default-grid.css");*@

<div class="orchard-layouts-root">
    @Display(Model.LayoutRoot)
</div>
```

#### Responsive Layouts ####
CSS grid frameworks such as Bootstrap typically have support for *responsive design*. Responsive design in this context means handling various viewport sizes so that the layout looks good on any of them using so called *breakpoints*. A breakpoint is a certain viewport width in pixels. CSS has support for implementing breakpoints using *media queries*. Bootstrap implements a number of breakpoints using media queries. To target these breakpoints, it makes available the following family of column CSS class prefixes:

- **col-xs-** (Extra small viewports, e.g. smartphone devices)
- **col-sm-** (Small viewports, e.g. tablets)
- **col-md-** (Medium viewports, e.g. desktop computers and laptops)
- **col-lg-** (Large viewports, e.g. wide screens)

The idea behind these classes is that for example on larger viewports you may want to show cells horizontally, but stacked on smaller viewports. Such HTML could look like this:

```
<div class="row">
   <div class="col-xs-12 col-sm-8 col-md-6"></div>
</div>
```

Now, the layout editor does not know anything about responsive design. It simply lets you create a layout. It's up to you to determine the baseline layout, and specify any specific CSS classes on the Column elements to provide further control on smaller and larger viewports. In the sample templates overridden earlier, we used the *col-md-* CSS class prefix, which means we are targeting medium-sized viewports by default. To have a column span 12 columns on smaller viewports, we could specify a CSS class of *col-xs-12* on a column element that spans 6 columns by default. Let's see how this works.

#### Demo: Creating responsive layouts with Bootstrap ####
In this demo, we will see how to use the *CSS classes* setting on the *Column* elements to achieve the following responsiveness effect: on small viewports, a row with two columns should be equal in width (6+6), but for larger viewports we want the second column to be smaller than the first one (9+3). I will assume you have creates shape template overrides as explained in the *Overriding default temlates* section.

> For this demo I downloaded and installed the excellent Bootstrap theme called PJS.Bootstrap from the gallery.

With that in place, let's create a new Page content item with the following grid:

![](./figures/fig-75-responsive-layout-design.png)

Since we used the **col-xs-** class prefix in our Column.cshtml template, the two columns of the second row will be sized equally, since we created the columns as 6 units each.

Next, to make the first column appear as 9 units wide and the second one as 3 units, we need to apply the following CSS classes to each column respectively:

- col-sm-9
- col-sm-3

![](./figures/fig-76-column1.png)
![](./figures/fig-77-column2.png)


Save these changes and check out the front end.
First, resize the browser window to simulate a very small view port:

![](./figures/fig-78-viewport-xs.png)

Notice that both columns are equally sized, as designed using the Layout Editor.
Next, resize the browser window to simulate a larger viewport:

![](./figures/fig-79-viewport-sm.png)

Notice how the columns are no longer equally sized. This is because the Bootstrap stylesheet defined a media query to implement a breakpoint for width > 768px, which let's the `.col-sm-` prefixed classes kick in. Since we applied two of such classes, they are now in effect.

The generated HTML output looks like this:

```
<div class="container">
   <div class="row">
      <div class="col-xs-12">
         ...
      </div>
   </div>
   <div class="row">
      <div class=" col-xs-6 col-sm-9">
         ...
      </div>
      <div class=" col-xs-6 col-sm-3">
         ...
      </div>
   </div>
</div>
```

So there you have it: responsive design using Orchard Layouts.

### Summary ###
In this chapter, we learned about Bootstrap and how to take advantage of its responsive features using the Layout editor to gain control over column sizes depending on various breakpoints.

To learn more about Bootstrap and responsive grids, visit http://getbootstrap.com/css.   